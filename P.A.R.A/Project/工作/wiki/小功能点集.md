# 将 JSX 渲染到 React Dom 上的任意位置

`createPortal` 允许你将 JSX 作为 children 渲染至 DOM 的不同部分

```
import { createPortal } from 'react-dom';

function MyComponent() {
  return (
    <div style={{ border: '2px solid black' }}>
      <p>这个子节点被放置在父节点 div 中。</p>
      {createPortal(
        <p>这个子节点被放置在 document body 中。</p>,
        document.body
      )}
    </div>
  );
}
```

# 获取页面元素 clientRect

1. 富文本：lexical 中获取节点的 clientRect 信息：

```
const range = createDOMRange(editor, anchor.getNode(), anchor.offset, focus.getNode(), focus.offset);

if (range !== null) {
  const {left, width} = range.getBoundingClientRect();
  const selectionRects = createRectsFromDOMRange(editor, range); // lexical 节点 domRect[]
  ...
}
```

2. 非富文本：
   Element.getBoundingClientRect(); // 返回 DOMRect 对象，其提供了元素的大小及相对于视口的位置

domRect 是包含整个元素的最小矩形（包括 padding 和 border-width）。该对象使用 left、top、right、bottom、x、y、width 和 height 这几个以像素为单位的只读属性描述整个矩形的位置和大小。除了 width 和 height 以外的属性是相对于视图窗口的左上角来计算的。


# 获取选区

1. [富文本选区:](https://lexical.dev/docs/concepts/selection#working-with-selection) 

`Lexical` 的 `Selection` 是 `EditorState` 的一部分。编辑器的每次更新和改动，选择始终与 `EditorState` 的节点树保持一致

在 Lexical 中有四种类型的选择：
- `RangeSelection` 范围选择
- `NodeSelection` 节点选择
- `TableSelection` (在 @lexical/table 中实现)
- `null`

`RangeSelection` 是最常见的选择类型，也是平时开发中用得最多的，是浏览器的 DOM Selection 和 Range API 的规范化。

包含锚点、焦点；

使用场景：
- 获取鼠标当前定位的节点
- 选区信息
- 


```
const selection = $getSelection();


```
